<!DOCTYPE html>
<html lang="en">

<head>
	<title>Mercure</title>
	<link rel="stylesheet" href="app.css">
</head>

<body>
	<h1>Mercure Testing Page</h1>

	<section>
		<h1>Subscriber</h1>
		<form name="subscribe">
			<div>
				<label>
					Topics to get updates for *:
					<textarea name="topics" required cols="30" rows="3">http://example.com/books/10
http://example.com/books/novels/{id}</textarea>
				</label>
				<small>One <a href="https://tools.ietf.org/html/rfc6570">URI template</a> per line.</small>
			</div>

			<div>
				<label>
					Last Event ID:
					<input name="lastEventId">
				</label>
			</div>

			<div>
				<label>
					JWT:
					<input name="jwt" autocomplete="off" value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtZXJjdXJlVGFyZ2V0cyI6WyJ1c2VyLTEiLCJncm91cC00MiJdfQ.-smE_vNaDlNioN-ui7pmRWrIUUBXwMj6jHxJM7I-q80">
				</label>
				<small>
					<a href="https://jwt.io" target="_blank">Create a token</a>. Default key:
					<code>!UnsecureChangeMeSubscriber!</code>, don't forget to add an array of targets (strings) in a claim named
					<code>mercureTargets</code>.
				</small>
			</div>

			<input type="submit" value="Subscribe" name="subscribe">
			<button name="unsubscribe" disabled>Unsubscribe</button>
		</form>

		<main id="updates">No updates pushed yet.</main>

		<template id="update">
			<li>
				<article>
					<h1></h1>
					<pre></pre>
				</article>
			</li>
		</template>
	</section>

	<section>
		<h1>Publisher</h1>

		<form name="publish" action="/publish" method="POST">
			<div>
				<label>
					Topics *:
					<textarea name="topics" required>http://example.com/books/1
http://example.com/books/novels/1</textarea>
				</label>
				<small>First line: canonical <a href="https://tools.ietf.org/html/rfc4622">IRI</a>. Next lines: alternate IRIs.</small>
			</div>

			<div>
				<label>
					Data *:
					<textarea name="data" required cols="30" rows="5">{
  "@id": "http://example.com/books/1",
  "availability": "http://schema.org/OutOfStock"
}</textarea>
				</label>
			</div>

			<div>
				<label>
					Targets:
					<textarea name="targets">group-42</textarea>

					<small>One string per line.</small>
				</label>
			</div>

			<div>
				<label>
					JWT *:
					<input name="jwt" required autocomplete="off" value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.HB0k08BaV8KlLZ3EafCRlTDGbkd9qdznCzJQ_l8ELTU">
				</label>
				<small>
					<a href="https://jwt.io" target="_blank">Create a new token</a>. Default key:
					<code>!UnsecureChangeMePublisher!</code>
				</small>
			</div>

			<div>
				<label>
					Event ID:
					<input name="id">
				</label>
			</div>

			<div>
				<label>
					Event Type:
					<input name="type">
				</label>
			</div>

			<div>
				<label>
					Event Retry:
					<input name="retry">
				</label>
			</div>

			<input type="submit" value="Publish">
		</form>
	</section>

	<script src="app.js"></script>
</body>

</html>
